<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Invitation ‚ú®</title>
    <link rel="stylesheet" href="css.css">
  </head>
  <body>

  <div class="bg-image"></div>

  <!-- Floating stars -->
  <div class="stars-container" id="starsContainer"></div>

  <!-- Floating hearts -->
  <div class="hearts-container" id="heartsContainer"></div>

  <audio id="bg-music" loop>
    <source src="isee-the-light.mp3" type="audio/mpeg">
  </audio>

  <div class="bg-text" id="mainCard">
    <h1>Can I be your Valentine? ‚ú®</h1>

    <p id="invite-text">
      <span class="break-line">I know we already talked about this,</span>
      <span class="break-line">I just couldn't let this chance slip by.</span>
      <span class="break-line">Would you consider having dinner with me?</span>
      <span class="break-line">No expectations, just a nice Sunday evening.</span>
    </p>

    <div class="buttons">
      <button class="yes-btn" onclick="sayYes()">Yes ‚ú®</button>
      <button class="no-btn" id="noBtn">No üö´</button>
    </div>
  </div>

  <script>
    // Floating stars
    function createStar() {
      const star = document.createElement('div');
      star.className = 'star';
      star.innerHTML = ['‚≠ê', '‚ú®', 'üåü', 'üí´', '‚ö°'][Math.floor(Math.random() * 5)];
      star.style.left = Math.random() * 100 + '%';
      star.style.animationDuration = (Math.random() * 3 + 5) + 's';
      star.style.animationDelay = Math.random() * 2 + 's';
      star.style.fontSize = (Math.random() * 15 + 15) + 'px';
      document.getElementById('starsContainer').appendChild(star);
      
      setTimeout(() => star.remove(), 8000);
    }

    // Create stars periodically
    setInterval(createStar, 800);
    for(let i = 0; i < 5; i++) setTimeout(createStar, i * 200);

    // Sparkles
    function createSparkle(x, y) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.style.left = x + 'px';
      sparkle.style.top = y + 'px';
      sparkle.style.animationDelay = Math.random() * 0.5 + 's';
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 2000);
    }

    // Add sparkles on mouse move
    let lastSparkle = 0;
    document.addEventListener('mousemove', (e) => {
      const now = Date.now();
      if (now - lastSparkle > 100) {
        createSparkle(e.clientX, e.clientY);
        lastSparkle = now;
      }
    });

    // Track response
    let userResponse = null;
    
    // IMPORTANT: Replace this URL with your own webhook/server endpoint
    // See instructions below on how to set this up
    const WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbxLbXyHpjjGxBb1HGqMlvLLb3NAwiKzVvsswu0SoPxhtgP-ANSP4ZoenZ29fhAooKBxDA/exec';
    
    // Function to log the response
    function logResponse(response) {
      userResponse = response;
      const timestamp = new Date().toLocaleString();
      console.log(`Response: ${response} at ${timestamp}`);
      
      // Store in localStorage so you can check it later
      localStorage.setItem('valentineResponse', JSON.stringify({
        response: response,
        timestamp: timestamp
      }));
      
      // Send to remote server (Option 3)
      sendToServer(response, timestamp);
    }
    
    // Send response to your server/webhook
    function sendToServer(response, timestamp) {
      // Only send if webhook URL is configured
      if (WEBHOOK_URL === 'YOUR_WEBHOOK_URL_HERE') {
        console.log('Webhook not configured. Skipping remote logging.');
        return;
      }
      
      const data = {
        response: response,
        timestamp: timestamp,
        userAgent: navigator.userAgent,
        page: window.location.href
      };
      
      // Send data to webhook
      fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
        mode: 'no-cors' // Use this for Google Apps Script or simple webhooks
      })
      .then(() => {
        console.log('Response sent to server successfully');
      })
      .catch((error) => {
        console.error('Error sending to server:', error);
      });
    }

    // No button logic
    const noBtn = document.getElementById("noBtn");
    const music = document.getElementById("bg-music");
    let noCount = 0;

    noBtn.addEventListener("click", () => {
      noCount++;

      if (noCount === 1) {
        noBtn.innerText = "Wrong click? üòÖ";
        return;
      }

      const x = Math.random() * 320 - 160;
      const y = Math.random() * 220 - 110;

      noBtn.style.transform = `translate(${x}px, ${y}px) scale(${Math.max(0.45, 1 - noCount * 0.1)})`;

      if (noCount === 2) noBtn.innerText = "Sigurado ka? ü•∫";
      if (noCount === 3) noBtn.innerText = "Just one chance? üíî";
      if (noCount === 4) noBtn.innerText = "No na talaga? üòî";
      if (noCount === 5) noBtn.innerText = "Grabe naman üò≠";
      if (noCount >= 6) {
        // Log the "No" response
        logResponse('NO');
        noBtn.style.opacity = '0';
        setTimeout(() => noBtn.style.display = "none", 300);
      }
    });

    // Floating hearts animation
    function createFloatingHeart() {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù'][Math.floor(Math.random() * 5)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
      heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
      document.getElementById('heartsContainer').appendChild(heart);
      
      setTimeout(() => heart.remove(), 5000);
    }

    // Yes button - Success
    function sayYes() {
      // Log the "Yes" response
      logResponse('YES');
      
      // Hide the title immediately
      const title = document.querySelector('h1');
      title.style.display = 'none';
      title.style.visibility = 'hidden';
      title.style.opacity = '0';
      
      // Hide only the invitation text spans, not the container
      const breakLines = document.querySelectorAll('.break-line');
      breakLines.forEach(line => {
        line.style.display = 'none';
        line.style.visibility = 'hidden';
        line.style.opacity = '0';
      });
      
      // Hide buttons immediately
      const buttons = document.querySelector('.buttons');
      buttons.style.display = 'none';
      buttons.style.visibility = 'hidden';
      buttons.style.opacity = '0';
      
      if (music) {
        music.volume = 0.4;
        music.play();
      }

      // Add success animation
      document.getElementById('mainCard').classList.add('success-animation');

      // Create confetti with hearts
      for(let i = 0; i < 150; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          
          // Mix of shapes
          if (Math.random() > 0.5) {
            confetti.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', '‚ú®', '‚≠ê'][Math.floor(Math.random() * 5)];
            confetti.style.fontSize = (Math.random() * 10 + 15) + 'px';
          } else {
            confetti.style.width = (Math.random() * 8 + 6) + 'px';
            confetti.style.height = (Math.random() * 8 + 6) + 'px';
            confetti.style.background = ['#ff6b9d', '#c06c84', '#f67280', '#ffd93d', '#6bcf7f', '#a29bfe'][Math.floor(Math.random() * 6)];
          }
          
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.top = '-20px';
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 4000);
        }, i * 20);
      }

      // Sparkle burst from center
      setTimeout(() => {
        for(let i = 0; i < 50; i++) {
          setTimeout(() => {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle-burst';
            const angle = (Math.PI * 2 * i) / 50;
            const distance = Math.random() * 300 + 100;
            sparkle.style.setProperty('--angle', angle + 'rad');
            sparkle.style.setProperty('--distance', distance + 'px');
            sparkle.innerHTML = '‚ú®';
            document.getElementById('mainCard').appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
          }, i * 30);
        }
      }, 300);

      // Update text with staggered animation
      setTimeout(() => {
        document.getElementById("invite-text").innerHTML = `
          <div class="success-content">
            <div class="success-line" style="animation-delay: 0.1s;">
              <strong class="date-emphasis">Dinner at 6 PM ‚Ä¢ February 15</strong>
            </div>
            <div class="details-container">
              <div class="detail-item" style="animation-delay: 0.3s;">
                <span class="detail-icon">üìç</span>
                <span class="detail-text">GAEA (191 A. Mabini Street, San Juan)</span>
              </div>
              <div class="detail-item" style="animation-delay: 0.5s;">
                <span class="detail-icon">üëó</span>
                <span class="detail-text">Wear whatever makes you feel comfortable</span>
              </div>
              <div class="detail-item" style="animation-delay: 0.7s;">
                <span class="detail-icon">üöó</span>
                <span class="detail-text">Kuya grabe driver will pick us up HAHAHA</span>
              </div>
            </div>
            <div class="success-line closing-message" style="animation-delay: 0.9s;">
              Just looking forward to good food,<br>
              good conversation, and your company.
            </div>
            <div class="success-line final-sparkle" style="animation-delay: 1.1s;">
              Hope to see you!
            </div>
          </div>
        `;
      }, 600);
    }
  </script>
  </body>
</html>


